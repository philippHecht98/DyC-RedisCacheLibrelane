stateDiagram-v2
    [*] --> IF_ST_IDLE: Reset
    
    IF_ST_IDLE --> IF_ST_EXECUTE: CPU writes operation register<br/>(op_written pulse)
    
    IF_ST_EXECUTE --> IF_ST_WAIT: Assert start_out (1 cycle)<br/>Signal controller to begin
    
    IF_ST_WAIT --> IF_ST_COMPLETE: Controller asserts done_in<br/>Latch results, hit status
    
    IF_ST_COMPLETE --> IF_ST_EXECUTE: CPU writes next operation<br/>(op_written pulse)
    
    note right of IF_ST_IDLE
        Waiting for AXI write
        to operation register
        start_out = 0
        status_done = 0
    end note
    
    note right of IF_ST_EXECUTE
        Single cycle state
        Pulse start_out = 1
        Trigger controller
    end note
    
    note right of IF_ST_WAIT
        Waiting for controller
        start_out = 0
        Controller performs:
        - Memory access
        - Tag comparison
        - Data retrieval
    end note
    
    note right of IF_ST_COMPLETE
        Results ready
        status_done = 1
        CPU can read:
        - result_regs[]
        - result_index_reg
        - status_reg (hit, error)
    end note
